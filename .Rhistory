library(xlsx)
df2 <- read.xlsx("UrbanPop.xlsx", sheetIndex = 1)
df2
# Pacote gdata
detach(package:xlsx)
library(gdata)
arq1 <- xls2csv("planilha1.xlsx",
sheet = 1,
na.strings = "EMPTY")
arq1
read.csv(arq1)
library(readr)
# RMongoDB
# Instalação do Pacote
install.packages("devtools")
install_github("mongosoup/rmongodb", force = TRUE)
install_github("mongosoup/rmongodb", force = TRUE)
# RMongoDB
# Instalação do Pacote
install.packages("devtools")
library("devtools")
install_github("mongosoup/rmongodb", force = TRUE)
library(rmongodb)
# Criando a conexão
help("mongo.create")
mongo <- mongo.create()
mongo
# Checando a conexão
mongo.is.connected(mongo)
mongo.get.databases(mongo)
if(mongo.is.connected(mongo) == TRUE) {
mongo.get.databases(mongo)
}
# Armazenando o nome de uma das coleções
coll <- "users.contatos"
# Contando os registros em uma coleção
help("mongo.count")
mongo.count(mongo, coll)
# Buscando um registro em uma coleção
mongo.find.one(mongo, coll)
# Obtendo um vetor de valores distintos das chaves de uma coleção
res <- mongo.distinct(mongo, coll, "city")
head(res)
# Obtendo um vetor de valores distintos das chaves de uma coleção
# E gerando um histograma
pop <- mongo.distinct(mongo, coll, "pop")
hist(pop)
# Contando os elementos
nr <- mongo.count(mongo, coll, list('pop' = list('$lte' = 2)))
print( nr )
# Buscando todos os elementos
pops <- mongo.find.all(mongo, coll, list('pop' = list('$lte' = 2)))
head(pops, 2)
# Buscando todos os elementos
pops <- mongo.find.all(mongo, coll, list('pop' = list('$lte' = 2)))
head(pops, 2)
# Encerrando a conexão
mongo.destroy(mongo)
# Criando e validando um arquivo json
library(jsonlite)
json_arquivo <- '{"pop":{"$lte":2}, "pop":{"$gte":1}}'
cat(prettify(json_arquivo))
validate(json_arquivo)
R.Version()
install.packages('rlang')
library(dplyr)
library(hrbrthemes)
library(ggplot2)
df_preco_gas <- data.frame()
df_preco_gas
dir_gasolina="./PrecoGasolina/"
file_list <- list.files(path=dir_gasolina)
file_list
setwd("E:/Estudos/Trabalho_Bloco_A")
getwd()
library(dplyr)
library(rJava)
library(readxl)
file_list <- list.files(path=dir_gasolina)
file_list
for (i in 1:length(file_list))
{
print(i)
temp_data <- read.csv(paste(dir_gasolina,file_list[i],sep = ""),sep = "\t", fileEncoding="UTF-16LE")
#tira campos inúteis para nossa análise
temp_data<-temp_data%>%select(1,2,3,Data.da.Coleta,Valor.de.Venda,Valor.de.Compra,Unidade.de.Medida)
df_preco_gas <- rbind(df_preco_gas, temp_data) #for each iteration, bind the new data to the building dataset
}
warnings()
df_preco_gas$Data.da.Coleta <- strptime(df_preco_gas$Data.da.Coleta, format= "%d/%m/%Y")
format(df_preco_gas$Data.da.Coleta, format="%Y-%m-%d")
df_preco_gas$Data.da.Coleta<- as.character(df_preco_gas$Data.da.Coleta)
names(df_preco_gas)[1] <- "Regiao"
names(df_preco_gas)[2] <- "UF"
names(df_preco_gas)[3] <- "Municipio"
names(df_preco_gas)[4] <- "Data_Coleta"
names(df_preco_gas)[5] <- "Valor_Venda"
names(df_preco_gas)[6] <- "Valor_Compra"
names(df_preco_gas)[7] <- "Unidade_Medida"
View(df_preco_gas)
View(df_preco_gas%>%filter(mes == '2019-08'))
df_preco_gas$mes<-substr(df_preco_gas$Data_Coleta,1,7)
View(df_preco_gas%>%filter(mes == '2019-08'))
temp_data <- read.csv(paste(dir_gasolina,"2019-08-gasolina-etanol.csv",sep = ""),sep = "\t", fileEncoding="UTF-16LE")
temp_data
view(temp_data)
View(temp_data)
View(df_preco_gas%>%filter(mes == '2019-08'))
temp_data2<-temp_data%>%select(1,2,3,Data.da.Coleta,Valor.de.Venda,Valor.de.Compra,Unidade.de.Medida)
View(temp_data2)
df_preco_gas <- rbind(df_preco_gas, temp_data2)
df_preco_gas
dir_gasolina="./PrecoGasolina/"
file_list <- list.files(path=dir_gasolina)
file_list
for (i in 1:length(file_list))
{
print(i)
temp_data <- read.csv(paste(dir_gasolina,file_list[i],sep = ""),sep = "\t", fileEncoding="UTF-16LE")
#tira campos inúteis para nossa análise
temp_data<-temp_data%>%select(1,2,3,Data.da.Coleta,Valor.de.Venda,Valor.de.Compra,Unidade.de.Medida)
df_preco_gas <- rbind(df_preco_gas, temp_data) #for each iteration, bind the new data to the building dataset
}
df_preco_gas <- data.frame()
df_preco_gas
dir_gasolina="./PrecoGasolina/"
file_list <- list.files(path=dir_gasolina)
file_list
for (i in 1:length(file_list))
{
print(i)
temp_data <- read.csv(paste(dir_gasolina,file_list[i],sep = ""),sep = "\t", fileEncoding="UTF-16LE")
#tira campos inúteis para nossa análise
temp_data<-temp_data%>%select(1,2,3,Data.da.Coleta,Valor.de.Venda,Valor.de.Compra,Unidade.de.Medida)
df_preco_gas <- rbind(df_preco_gas, temp_data) #for each iteration, bind the new data to the building dataset
}
temp_data <- read.csv(paste(dir_gasolina,"2019-08-gasolina-etanol.csv",sep = ""),sep = "\t", fileEncoding="UTF-16LE")
temp_data2<-temp_data%>%select(1,2,3,Data.da.Coleta,Valor.de.Venda,Valor.de.Compra,Unidade.de.Medida)
df_preco_gas <- rbind(df_preco_gas, temp_data2)
View(df_preco_gas)
df_preco_gas <- data.frame()
df_preco_gas
dir_gasolina="./PrecoGasolina/"
file_list <- list.files(path=dir_gasolina)
file_list
for (i in 1:length(file_list))
{
print(i)
temp_data <- read.csv(paste(dir_gasolina,file_list[i],sep = ""),sep = "\t", fileEncoding="UTF-16LE")
#tira campos inúteis para nossa análise
temp_data<-temp_data%>%select(1,2,3,Data.da.Coleta,Valor.de.Venda,Valor.de.Compra,Unidade.de.Medida)
temp_data$Valor.de.Venda<- gsub('.', ',', temp_data$Valor.de.Venda)
temp_data$Valor.de.Compra<- gsub('.', ',', temp_data$Valor.de.Compra)
df_preco_gas <- rbind(df_preco_gas, temp_data) #for each iteration, bind the new data to the building dataset
}
View(df_preco_gas)
temp_data <- read.csv(paste(dir_gasolina,"2019-08-gasolina-etanol.csv",sep = ""),sep = "\t", fileEncoding="UTF-16LE")
temp_data2<-temp_data%>%select(1,2,3,Data.da.Coleta,Valor.de.Venda,Valor.de.Compra,Unidade.de.Medida)
View(temp_data2)
temp_data2$Valor.de.Venda<- gsub('.', ',', temp_data2$Valor.de.Venda)
View(temp_data2)
temp_data2<-temp_data%>%select(1,2,3,Data.da.Coleta,Valor.de.Venda,Valor.de.Compra,Unidade.de.Medida)
str(temp_data2)
temp_data <- read.csv(paste(dir_gasolina,"2019-07-gasolina-etanol.csv",sep = ""),sep = "\t", fileEncoding="UTF-16LE")
temp_data2<-temp_data%>%select(1,2,3,Data.da.Coleta,Valor.de.Venda,Valor.de.Compra,Unidade.de.Medida)
str(temp_data2)
df_preco_gas <- data.frame()
df_preco_gas
dir_gasolina="./PrecoGasolina/"
file_list <- list.files(path=dir_gasolina)
file_list
for (i in 1:length(file_list))
{
print(i)
temp_data <- read.csv(paste(dir_gasolina,file_list[i],sep = ""),sep = "\t", fileEncoding="UTF-16LE")
#tira campos inúteis para nossa análise
temp_data<-temp_data%>%select(1,2,3,Data.da.Coleta,Valor.de.Venda,Valor.de.Compra,Unidade.de.Medida)
temp_data$Valor.de.Venda<- gsub(',', '.', temp_data$Valor.de.Venda)
temp_data$Valor.de.Venda=as.numeric(temp_data$Valor.de.Venda)
temp_data$Valor.de.Compra<- gsub(',', '.', temp_data$Valor.de.Compra)
temp_data$Valor.de.Compra=as.numeric(temp_data$Valor.de.Compra)
df_preco_gas <- rbind(df_preco_gas, temp_data) #for each iteration, bind the new data to the building dataset
}
df_preco_gas$Data.da.Coleta <- strptime(df_preco_gas$Data.da.Coleta, format= "%d/%m/%Y")
format(df_preco_gas$Data.da.Coleta, format="%Y-%m-%d")
df_preco_gas$Data.da.Coleta<- as.character(df_preco_gas$Data.da.Coleta)
names(df_preco_gas)[1] <- "Regiao"
names(df_preco_gas)[2] <- "UF"
names(df_preco_gas)[3] <- "Municipio"
names(df_preco_gas)[4] <- "Data_Coleta"
names(df_preco_gas)[5] <- "Valor_Venda"
names(df_preco_gas)[6] <- "Valor_Compra"
names(df_preco_gas)[7] <- "Unidade_Medida"
View(df_preco_gas)
str(df_preco_gas)
df_preco_gas$mes<-substr(df_preco_gas$Data_Coleta,1,7)
View(df_preco_gas%>%filter(mes == '2019-08'))
sum(is.na (df_preco_gas$Valor_Venda))
sum(is.na (df_preco_gas$Valor_Compra))
df_preco_gas2<-df_preco_gas[-c(2,3,4,7)]
View(df_preco_gas2)
df_preco_gas2$Valor_Venda<-as.numeric(df_preco_gas2$Valor_Venda)
df_preco_gas2$Valor_Compra<-as.numeric(df_preco_gas2$Valor_Compra)
df_preco_gas3=df_preco_gas2%>%group_by(Regiao,mes)%>%summarize(mediaValorVendaGas=mean(Valor_Venda),medianaValorVendaGas=median(Valor_Venda),mediaValorCompraGas=mean(Valor_Compra),medianaValorCompraGas=median(Valor_Compra))
View(df_preco_gas3)
df_impostos <-read_excel("ImpostosPrecoGasolina_ConsolidadoTratado.xlsx", sheet = 1)
df_impostos$Data<- as.character(df_impostos$Data)
#cria coluna mês
df_impostos$mes<-substr(df_impostos$Data,1,7)
#retira colunas que não serão utilizadas
df_impostos2=df_impostos[-c(1,3,5)]
head(df_impostos2)
#agrupa e gera a media e a mediana
df_impostos3=df_impostos2%>%group_by(Taxa,Sigla_regiao,mes)%>%summarize(mediaValorImp=mean(Valor),medianaValorImp=median(Valor))
#tira meses a mais de dados
df_impostos3<-df_impostos3%>%filter(mes<'2020-08')
head(df_impostos3)
df_brent <-read_excel("RBRTEd.xls", sheet = 2)
#dropa lixo das primeiras duas linhas
df_brent=df_brent[-c(1,2),]
names(df_brent)[1] <- "DataCotacao"
names(df_brent)[2] <- "ValorEmDolar"
#converte as datas que vieram em dias deste 01/01/1900
df_brent <- df_brent%>% mutate(DataCotacao = as.Date(as.numeric(as.character(DataCotacao)), origin = "1900-01-01"))
#transforma em data
df_brent$DataCotacao <- strptime(df_brent$DataCotacao, format= "%Y-%m-%d")
df_brent$DataCotacao<- as.character(df_brent$DataCotacao)
df_brent$mes<-substr(df_brent$DataCotacao,1,7)
typeof(df_brent$DataCotacao)
str(df_brent2)
#retira a coluna de data
df_brent2=df_brent[-1]
#retira meses a mais
df_brent2<-df_brent2%>%filter(mes<'2020-08' & mes>'2018-06')
df_brent2$ValorEmDolar<-as.numeric(df_brent2$ValorEmDolar)
df_brent3<-df_brent2%>%group_by(mes)%>%summarize(mediaValorBrentDolar=mean(ValorEmDolar),medianaValorBrentDolar=median(ValorEmDolar))
View(df_brent3)
df_dolar <-read.csv("USD_BRL_Dados_Historicos.csv")
names(df_dolar)[1] <- "DataCotacao"
names(df_dolar)[2] <- "Ultimo"
names(df_dolar)[3] <- "Abertura"
names(df_dolar)[4] <- "Maxima"
names(df_dolar)[5] <- "Minima"
names(df_dolar)[6] <- "Var"
#ajusta a data para ficar igual as outras
df_dolar$DataCotacao <- strptime(df_dolar$DataCotacao, format= "%d.%m.%Y")
format(df_dolar$DataCotacao, format="%Y-%m-%d")
df_dolar$DataCotacao<- as.character(df_dolar$DataCotacao)
df_dolar$mes<-substr(df_dolar$DataCotacao,1,7)
df_dolar2<-df_dolar[-c(1,3,4,5,6)]
#retira meses a mais
df_dolar2<-df_dolar2%>%filter(mes<'2020-08' & mes>'2018-06')
df_dolar2$Ultimo<-as.numeric(df_dolar2$Ultimo)
df_dolar3<-df_dolar2%>%group_by(mes)%>%summarize(mediaValorDolar=mean(Ultimo),medianaValorDolar=median(Ultimo))
View(df_dolar3)
df_ipca <-read_excel("ResultadoFinal_IPCA.xlsx")
names(df_ipca)[1] <- "Regiao"
names(df_ipca)[3] <- "Mes_Anterior"
names(df_ipca)[4] <- "IPCA_Mes"
names(df_ipca)[5] <- "Ano"
names(df_ipca)[6] <- "12_meses"
names(df_ipca)[8] <- "Sigla_Regiao"
df_ipca$Data <- strptime(df_ipca$Data, format= "%Y-%m-%d")
df_ipca$Data<- as.character(df_ipca$Data)
distinct(df_ipca,Regiao)
df_ipca["Sigla_Regiao"][df_ipca["Regiao"] == 'Aracaju']<- 'NE'
df_ipca["Sigla_Regiao"][df_ipca["Regiao"] == 'São Luís']<- 'NE'
df_ipca["Sigla_Regiao"][df_ipca["Regiao"] == 'Rio Branco']<- 'N'
df_ipca["Sigla_Regiao"][df_ipca["Regiao"] == 'Salvador']<- 'NE'
df_ipca["Sigla_Regiao"][df_ipca["Regiao"] == 'Belém']<- 'N'
df_ipca["Sigla_Regiao"][df_ipca["Regiao"] == 'Rio de Janeiro']<- 'SE'
df_ipca["Sigla_Regiao"][df_ipca["Regiao"] == 'Brasília']<- 'CO'
df_ipca["Sigla_Regiao"][df_ipca["Regiao"] == 'Porto Alegre']<- 'S'
df_ipca["Sigla_Regiao"][df_ipca["Regiao"] == 'Recife']<- 'NE'
df_ipca["Sigla_Regiao"][df_ipca["Regiao"] == 'Campo Grande']<- 'CO'
df_ipca["Sigla_Regiao"][df_ipca["Regiao"] == 'São Paulo']<- 'SE'
df_ipca["Sigla_Regiao"][df_ipca["Regiao"] == 'Belo Horizonte']<- 'SE'
df_ipca["Sigla_Regiao"][df_ipca["Regiao"] == 'Vitória']<- 'SE'
df_ipca["Sigla_Regiao"][df_ipca["Regiao"] == 'Goiânia']<- 'CO'
df_ipca["Sigla_Regiao"][df_ipca["Regiao"] == 'Curitiba']<- 'S'
df_ipca["Sigla_Regiao"][df_ipca["Regiao"] == 'Brasil']<- 'BR'
df_ipca["Sigla_Regiao"][df_ipca["Regiao"] == 'Fortaleza']<- 'NE'
df_ipca["Sigla_Regiao"][df_ipca["Regiao"] == 'Grande Vitória']<- 'SE'
df_ipca$mes<-substr(df_ipca$Data,1,7)
View(df_ipca)
df_ipca2<-df_ipca[-c(1,3,5,6,7)]
df_ipca3=df_ipca2%>%group_by(Sigla_Regiao,PesoRegional,mes)%>%summarize(mediaIpcaMes=mean(IPCA_Mes),medianaIpcaMes=median(IPCA_Mes))
View(df_ipca3)
View(df_preco_gas)
View(df_preco_gas[Regiao == "BR"])
View(df_preco_gas[df_preco_gas$Regiao == "BR"])
View(df_preco_gas3[df_preco_gas3$Regiao == "BR"])
View(df_preco_gas3)
df_preco_gas3[Regiao]
df_preco_gas3[Regiao = 'SE']
df_preco_gas3[df_preco_gas3$Regiao = 'SE']
df_preco_gas3[df_preco_gas3$Regiao == 'SE']
df_preco_gas3[Regiao == 'SE']
df_preco_gas3%>%filter(Regiao == 'SE')
View(df_preco_gas3%>%filter(Regiao == 'SE'))
View(df_brent)
df_brent<-df_brent%>%filter(mes<'2020-08' & mes>'2018-06')
View(df_brent)
df_brent2=df_brent[-1]
df_brent2<-df_brent2%>%filter(mes<'2020-08' & mes>'2018-06')
df_brent2$ValorEmDolar<-as.numeric(df_brent2$ValorEmDolar)
df_dolar_brent<-merge(df_brent2,df_dolar2,by="DataCotacao")
head(df_dolar2)
head(df_dolar2)
head(df_dolar
head(df_dolar)
head(df_dolar)
df_dolar2<-df_dolar[-c(3,4,5,6)]
#retira meses a mais
df_dolar2<-df_dolar2%>%filter(mes<'2020-08' & mes>'2018-06')
df_dolar2$Ultimo<-as.numeric(df_dolar2$Ultimo)
head(df_dolar2)
df_dolar_brent<-merge(df_brent2,df_dolar2,by="DataCotacao")
head(df_dolar2)
View(df_dolar2)
View(df_brent2)
df_brent <-read_excel("RBRTEd.xls", sheet = 2)
#dropa lixo das primeiras duas linhas
df_brent=df_brent[-c(1,2),]
names(df_brent)[1] <- "DataCotacao"
names(df_brent)[2] <- "ValorEmDolar"
#converte as datas que vieram em dias deste 01/01/1900
df_brent <- df_brent%>% mutate(DataCotacao = as.Date(as.numeric(as.character(DataCotacao)), origin = "1900-01-01"))
#transforma em data
df_brent$DataCotacao <- strptime(df_brent$DataCotacao, format= "%Y-%m-%d")
df_brent$DataCotacao<- as.character(df_brent$DataCotacao)
df_brent$mes<-substr(df_brent$DataCotacao,1,7)
View(df_brent)
#retira meses a mais
df_brent2<-df_brent2%>%filter(mes<'2020-08' & mes>'2018-06')
df_brent2$ValorEmDolar<-as.numeric(df_brent2$ValorEmDolar)
View(df_brent2)
#retira meses a mais
df_brent<-df_brent%>%filter(mes<'2020-08' & mes>'2018-06')
df_brent$ValorEmDolar<-as.numeric(df_brent2$ValorEmDolar)
View(df_brent)
df_dolar_brent<-merge(df_brent,df_dolar2,by="DataCotacao")
View(df_dolar_brent)
df_dolar <-read.csv("USD_BRL_Dados_Historicos.csv")
names(df_dolar)[1] <- "DataCotacao"
names(df_dolar)[2] <- "Ultimo"
names(df_dolar)[3] <- "Abertura"
names(df_dolar)[4] <- "Maxima"
names(df_dolar)[5] <- "Minima"
names(df_dolar)[6] <- "Var"
#ajusta a data para ficar igual as outras
df_dolar$DataCotacao <- strptime(df_dolar$DataCotacao, format= "%d.%m.%Y")
format(df_dolar$DataCotacao, format="%Y-%m-%d")
df_dolar$DataCotacao<- as.character(df_dolar$DataCotacao)
df_dolar2<-df_dolar[-c(3,4,5,6)]
#retira meses a mais
df_dolar2<-df_dolar2%>%filter(mes<'2020-08' & mes>'2018-06')
df_dolar2$Ultimo<-as.numeric(df_dolar2$Ultimo)
df_dolar_brent<-merge(df_brent,df_dolar2,by="DataCotacao")
View(df_dolar_brent)
df_dolar <-read.csv("USD_BRL_Dados_Historicos.csv")
names(df_dolar)[1] <- "DataCotacao"
names(df_dolar)[2] <- "Ultimo"
names(df_dolar)[3] <- "Abertura"
names(df_dolar)[4] <- "Maxima"
names(df_dolar)[5] <- "Minima"
names(df_dolar)[6] <- "Var"
#ajusta a data para ficar igual as outras
df_dolar$DataCotacao <- strptime(df_dolar$DataCotacao, format= "%d.%m.%Y")
format(df_dolar$DataCotacao, format="%Y-%m-%d")
df_dolar$DataCotacao<- as.character(df_dolar$DataCotacao)
df_dolar2<-df_dolar[-c(3,4,5,6)]
#retira meses a mais
df_dolar2<-df_dolar2%>%filter(mes<'2020-08' & mes>'2018-06')
View(df_dolar2)
df_dolar2$Ultimo<-as.numeric(df_dolar2$Ultimo)
View(df_dolar2)
df_dolar <-read.csv("USD_BRL_Dados_Historicos.csv")
names(df_dolar)[1] <- "DataCotacao"
names(df_dolar)[2] <- "Ultimo"
names(df_dolar)[3] <- "Abertura"
names(df_dolar)[4] <- "Maxima"
names(df_dolar)[5] <- "Minima"
names(df_dolar)[6] <- "Var"
#ajusta a data para ficar igual as outras
df_dolar$DataCotacao <- strptime(df_dolar$DataCotacao, format= "%d.%m.%Y")
format(df_dolar$DataCotacao, format="%Y-%m-%d")
df_dolar$DataCotacao<- as.character(df_dolar$DataCotacao)
df_dolar2<-df_dolar[-c(3,4,5,6)]
#retira meses a mais
df_dolar2<-df_dolar2%>%filter(mes<'2020-08' & mes>'2018-06')
View(df_dolar2)
df_dolar2$Ultimo<- gsub(',', '.', df_dolar2$Ultimo)
df_dolar2$Ultimo<-as.numeric(df_dolar2$Ultimo)
View(df_dolar2)
View(df_brent)
df_dolar_brent<-merge(df_brent,df_dolar2,by="DataCotacao")
View(df_dolar_brent)
View(df_dolar_brent)
head(df_dolar_brent)
df_dolar_brent$ValorBrentReais=df_dolar_brent$ValorEmDolar*df_dolar_brent$Ultimo
head(df_dolar_brent)
#retira a coluna de data
df_dolar_brent2=df_dolar_brent[-1]
#retira a coluna de data
df_dolar_brent2=df_dolar_brent[-c(1,2)]
View(df_dolar_brent2)
names(df_brent)[2] <- "CotacaoDolar"
names(df_brent)[3] <- "CotacaoBrentReais"
names(df_dolar_brent2)[2] <- "CotacaoDolar"
names(df_dolar_brent2)[3] <- "CotacaoBrentReais"
View(df_dolar_brent2)
df_dolar_brent3<-df_dolar_brent2%>%group_by(mes)%>%summarize(CotacaoDolar=mean(CotacaoDolar),CotacaoBrentReais=mean(CotacaoBrentReais))
View(df_brent3)
View(df_dolar_brent2)
df_dolar_brent3<-df_dolar_brent2%>%group_by(mes)%>%summarize(CotacaoDolar=mean(CotacaoDolar),CotacaoBrentReais=mean(CotacaoBrentReais))
View(df_dolar_brent3)
View(df_dolar_brent3)
